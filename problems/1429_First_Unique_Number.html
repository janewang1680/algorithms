<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>1429_First_Unique_Number</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__html"><p><strong>1429.  First Unique Number</strong></p>
<p>Medium</p>
<p>You have a queue of integers, you need to retrieve the first unique integer in the queue.</p>
<p>Implement the  <code>FirstUnique</code> class:</p>
<ul>
<li><code>FirstUnique(int[] nums)</code>  Initializes the object with the numbers in the queue.</li>
<li><code>int showFirstUnique()</code> returns the value of  <strong>the first unique</strong>  integer of the queue, and returns  <strong>-1</strong>  if there is no such integer.</li>
<li><code>void add(int value)</code> insert value to the queue.</li>
</ul>
<p><strong>Example 1:</strong></p>
<p><strong>Input:</strong><br>
[“FirstUnique”,“showFirstUnique”,“add”,“showFirstUnique”,“add”,“showFirstUnique”,“add”,“showFirstUnique”]<br>
[[[2,3,5]],[],[5],[],[2],[],[3],[]]<br>
<strong>Output:</strong><br>
[null,2,null,2,null,3,null,-1]<br>
<strong>Explanation:</strong><br>
FirstUnique firstUnique = new FirstUnique([2,3,5]);<br>
firstUnique.showFirstUnique(); // return 2<br>
firstUnique.add(5);            // the queue is now [2,3,5,5]<br>
firstUnique.showFirstUnique(); // return 2<br>
firstUnique.add(2);            // the queue is now [2,3,5,5,2]<br>
firstUnique.showFirstUnique(); // return 3<br>
firstUnique.add(3);            // the queue is now [2,3,5,5,2,3]<br>
firstUnique.showFirstUnique(); // return -1</p>
<p><strong>Example 2:</strong></p>
<p><strong>Input:</strong><br>
[“FirstUnique”,“showFirstUnique”,“add”,“add”,“add”,“add”,“add”,“showFirstUnique”]<br>
[[[7,7,7,7,7,7]],[],[7],[3],[3],[7],[17],[]]<br>
<strong>Output:</strong><br>
[null,-1,null,null,null,null,null,17]<br>
<strong>Explanation:</strong><br>
FirstUnique firstUnique = new FirstUnique([7,7,7,7,7,7]);<br>
firstUnique.showFirstUnique(); // return -1<br>
firstUnique.add(7);            // the queue is now [7,7,7,7,7,7,7]<br>
firstUnique.add(3);            // the queue is now [7,7,7,7,7,7,7,3]<br>
firstUnique.add(3);            // the queue is now [7,7,7,7,7,7,7,3,3]<br>
firstUnique.add(7);            // the queue is now [7,7,7,7,7,7,7,3,3,7]<br>
firstUnique.add(17);           // the queue is now [7,7,7,7,7,7,7,3,3,7,17]<br>
firstUnique.showFirstUnique(); // return 17</p>
<p><strong>Example 3:</strong></p>
<p><strong>Input:</strong><br>
[“FirstUnique”,“showFirstUnique”,“add”,“showFirstUnique”]<br>
[[[809]],[],[809],[]]<br>
<strong>Output:</strong><br>
[null,809,null,-1]<br>
<strong>Explanation:</strong><br>
FirstUnique firstUnique = new FirstUnique([809]);<br>
firstUnique.showFirstUnique(); // return 809<br>
firstUnique.add(809);          // the queue is now [809,809]<br>
firstUnique.showFirstUnique(); // return -1</p>
<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= nums.length &lt;= 10^5</code></li>
<li><code>1 &lt;= nums[i] &lt;= 10^8</code></li>
<li><code>1 &lt;= value &lt;= 10^8</code></li>
<li>At most  <code>50000</code> calls will be made to  <code>showFirstUnique</code> and  <code>add</code>.</li>
</ul>
<p><strong>[Solution]</strong></p>
<pre class=" language-java"><code class="prism  language-java"><span class="token keyword">class</span> <span class="token class-name">FirstUnique</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> val<span class="token punctuation">;</span>
        Node prev<span class="token punctuation">,</span> next<span class="token punctuation">;</span>
        
        <span class="token keyword">public</span> <span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">int</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>val <span class="token operator">=</span> val<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>prev <span class="token operator">=</span> null<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> null<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    Node head<span class="token punctuation">,</span> tail<span class="token punctuation">;</span>
    Set<span class="token operator">&lt;</span>Integer<span class="token operator">&gt;</span> dupes<span class="token punctuation">;</span>
    Map<span class="token operator">&lt;</span>Integer<span class="token punctuation">,</span> Node<span class="token operator">&gt;</span> map<span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> <span class="token function">FirstUnique</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dupes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        head <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tail <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        head<span class="token punctuation">.</span>next <span class="token operator">=</span> tail<span class="token punctuation">;</span>
        tail<span class="token punctuation">.</span>prev <span class="token operator">=</span> head<span class="token punctuation">;</span>
        
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> num <span class="token operator">:</span> nums<span class="token punctuation">)</span> <span class="token function">add</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">showFirstUnique</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>head<span class="token punctuation">.</span>next <span class="token operator">==</span> tail<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> head<span class="token punctuation">.</span>next<span class="token punctuation">.</span>val<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>dupes<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
        
        <span class="token keyword">if</span> <span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            Node node <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">removeNode</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
            dupes<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            Node node <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> node<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">addNode</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">void</span> <span class="token function">addNode</span><span class="token punctuation">(</span>Node node<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Node prev <span class="token operator">=</span> tail<span class="token punctuation">.</span>prev<span class="token punctuation">;</span>
        prev<span class="token punctuation">.</span>next <span class="token operator">=</span> node<span class="token punctuation">;</span>
        node<span class="token punctuation">.</span>prev <span class="token operator">=</span> prev<span class="token punctuation">;</span>
        node<span class="token punctuation">.</span>next <span class="token operator">=</span> tail<span class="token punctuation">;</span>
        tail<span class="token punctuation">.</span>prev <span class="token operator">=</span> node<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">void</span> <span class="token function">removeNode</span><span class="token punctuation">(</span>Node node<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Node prev <span class="token operator">=</span> node<span class="token punctuation">.</span>prev<span class="token punctuation">;</span>
        Node next <span class="token operator">=</span> node<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
        prev<span class="token punctuation">.</span>next <span class="token operator">=</span> next<span class="token punctuation">;</span>
        next<span class="token punctuation">.</span>prev <span class="token operator">=</span> prev<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
</div>
</body>

</html>
