<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>1236_Web_Crawler</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__html"><p><strong>1236.  Web Crawler</strong></p>
<p>Medium</p>
<p>Given a url  <code>startUrl</code>  and an interface  <code>HtmlParser</code>, implement a web crawler to crawl all links that are under the <strong>same hostname</strong>  as <code>startUrl</code>.</p>
<p>Return all urls obtained by your web crawler in  <strong>any</strong>  order.</p>
<p>Your crawler should:</p>
<ul>
<li>Start from the page:  <code>startUrl</code></li>
<li>Call  <code>HtmlParser.getUrls(url)</code>  to get all urls from a webpage of given url.</li>
<li>Do not crawl the same link twice.</li>
<li>Explore only the links that are under the  <strong>same hostname</strong>  as  <code>startUrl</code>.</li>
</ul>
<p><img src="https://assets.leetcode.com/uploads/2019/08/13/urlhostname.png" alt=""></p>
<p>As shown in the example url above, the hostname is  <code>example.org</code>. For simplicity sake, you may assume all urls use  <strong>http protocol</strong>  without any <strong>port</strong>  specified. For example, the urls <code>http://leetcode.com/problems</code>  and <code>http://leetcode.com/contest</code>  are under the same hostname, while urls  <code>http://example.org/test</code>  and  <code>http://example.com/abc</code>  are not under the same hostname.</p>
<p>The  <code>HtmlParser</code>  interface is defined as such:</p>
<p>interface HtmlParser {<br>
// Return a list of all urls from a webpage of given <em>url</em>.<br>
public List getUrls(String url);<br>
}</p>
<p>Below are two examples explaining the functionality of the problem, for custom testing purposes you’ll have three variables <code>urls</code>, <code>edges</code> and <code>startUrl</code>. Notice that you will only have access to <code>startUrl</code> in your code, while <code>urls</code> and <code>edges</code> are not directly accessible to you in code.</p>
<p><strong>Example 1:</strong></p>
<p><img src="https://assets.leetcode.com/uploads/2019/10/23/sample_2_1497.png" alt=""></p>
<p><strong>Input:</strong> urls = [<br>
“<a href="http://news.yahoo.com">http://news.yahoo.com</a>”,<br>
“<a href="http://news.yahoo.com/news">http://news.yahoo.com/news</a>”,<br>
“<a href="http://news.yahoo.com/news/topics/">http://news.yahoo.com/news/topics/</a>”,<br>
“<a href="http://news.google.com">http://news.google.com</a>”,<br>
“<a href="http://news.yahoo.com/us">http://news.yahoo.com/us</a>”<br>
]<br>
edges = [[2,0],[2,1],[3,2],[3,1],[0,4]]<br>
startUrl = “<a href="http://news.yahoo.com/news/topics/">http://news.yahoo.com/news/topics/</a>”<br>
<strong>Output:</strong> [<br>
“<a href="http://news.yahoo.com">http://news.yahoo.com</a>”,<br>
“<a href="http://news.yahoo.com/news">http://news.yahoo.com/news</a>”,<br>
“<a href="http://news.yahoo.com/news/topics/">http://news.yahoo.com/news/topics/</a>”,<br>
“<a href="http://news.yahoo.com/us">http://news.yahoo.com/us</a>”<br>
]</p>
<p><strong>Example 2:</strong></p>
<p><strong><img src="https://assets.leetcode.com/uploads/2019/10/23/sample_3_1497.png" alt=""></strong></p>
<p><strong>Input:</strong><br>
urls = [<br>
“<a href="http://news.yahoo.com">http://news.yahoo.com</a>”,<br>
“<a href="http://news.yahoo.com/news">http://news.yahoo.com/news</a>”,<br>
“<a href="http://news.yahoo.com/news/topics/">http://news.yahoo.com/news/topics/</a>”,<br>
“<a href="http://news.google.com">http://news.google.com</a>”<br>
]<br>
edges = [[0,2],[2,1],[3,2],[3,1],[3,0]]<br>
startUrl = “<a href="http://news.google.com">http://news.google.com</a>”<br>
<strong>Output:</strong> [“<a href="http://news.google.com">http://news.google.com</a>”]<br>
<strong>Explanation:</strong> The startUrl links to all other pages that do not share the same hostname.</p>
<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= urls.length &lt;= 1000</code></li>
<li><code>1 &lt;= urls[i].length &lt;= 300</code></li>
<li><code>startUrl</code> is one of the  <code>urls</code>.</li>
<li>Hostname label must be from 1 to 63 characters long, including the dots, may contain only the ASCII letters from ‘a’ to ‘z’, digits from ‘0’ to ‘9’ and the hyphen-minus character (’-’).</li>
<li>The hostname may not start or end with the hyphen-minus character (’-’).</li>
<li>See: <a href="https://en.wikipedia.org/wiki/Hostname#Restrictions_on_valid_hostnames">https://en.wikipedia.org/wiki/Hostname#Restrictions_on_valid_hostnames</a></li>
<li>You may assume there’re no duplicates in url library.</li>
</ul>
<p><strong>[Solution]</strong></p>
<pre class=" language-java"><code class="prism  language-java"><span class="token comment">/**
 * // This is the HtmlParser's API interface.
 * // You should not implement it, or speculate about its implementation
 * interface HtmlParser {
 *     public List&lt;String&gt; getUrls(String url) {}
 * }
 */</span>

<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> <span class="token function">crawl</span><span class="token punctuation">(</span>String startUrl<span class="token punctuation">,</span> HtmlParser htmlParser<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Set<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>startUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">helper</span><span class="token punctuation">(</span>startUrl<span class="token punctuation">,</span> <span class="token function">getHost</span><span class="token punctuation">(</span>startUrl<span class="token punctuation">)</span><span class="token punctuation">,</span> htmlParser<span class="token punctuation">,</span> set<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">(</span>set<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
        
     <span class="token keyword">void</span> <span class="token function">helper</span><span class="token punctuation">(</span>String startUrl<span class="token punctuation">,</span> String hostName<span class="token punctuation">,</span> HtmlParser htmlParser<span class="token punctuation">,</span> Set<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> set<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        List<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> urls <span class="token operator">=</span> htmlParser<span class="token punctuation">.</span><span class="token function">getUrls</span><span class="token punctuation">(</span>startUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>String url<span class="token operator">:</span> urls<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>set<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">getHost</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>hostName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">helper</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> hostName<span class="token punctuation">,</span> htmlParser<span class="token punctuation">,</span> set<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    String <span class="token function">getHost</span><span class="token punctuation">(</span>String url<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> idx <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> url<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> idx <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">?</span> url<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">:</span> idx<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
</div>
</body>

</html>
