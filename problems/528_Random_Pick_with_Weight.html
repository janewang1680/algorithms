<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>528_Random_Pick_with_Weight</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__html"><p><strong>528.  Random Pick with Weight</strong></p>
<p>Medium</p>
<p>You are given an array of positive integers  <code>w</code>  where  <code>w[i]</code>  describes the weight of  <code>i``th</code> index (0-indexed).</p>
<p>We need to call the function <code>pickIndex()</code>  which  <strong>randomly</strong>  returns an integer in the range  <code>[0, w.length - 1]</code>. <code>pickIndex()</code> should return the integer proportional to its weight in the  <code>w</code>  array. For example, for  <code>w = [1, 3]</code>, the probability of picking the index  <code>0</code>  is  <code>1 / (1 + 3) = 0.25</code>  (i.e 25%) while the probability of picking the index  <code>1</code>  is  <code>3 / (1 + 3) = 0.75</code>  (i.e 75%).</p>
<p>More formally, the probability of picking index  <code>i</code>  is  <code>w[i] / sum(w)</code>.</p>
<p><strong>Example 1:</strong></p>
<p><strong>Input</strong><br>
[“Solution”,“pickIndex”]<br>
[[[1]],[]]<br>
<strong>Output</strong><br>
[null,0]</p>
<p><strong>Explanation</strong><br>
Solution solution = new Solution([1]);<br>
solution.pickIndex(); // return 0. Since there is only one single element on the array the only option is to return the first element.</p>
<p><strong>Example 2:</strong></p>
<p><strong>Input</strong><br>
[“Solution”,“pickIndex”,“pickIndex”,“pickIndex”,“pickIndex”,“pickIndex”]<br>
[[[1,3]],[],[],[],[],[]]<br>
<strong>Output</strong><br>
[null,1,1,1,1,0]</p>
<p><strong>Explanation</strong><br>
Solution solution = new Solution([1, 3]);<br>
solution.pickIndex(); // return 1. It’s returning the second element (index = 1) that has probability of 3/4.<br>
solution.pickIndex(); // return 1<br>
solution.pickIndex(); // return 1<br>
solution.pickIndex(); // return 1<br>
solution.pickIndex(); // return 0. It’s returning the first element (index = 0) that has probability of 1/4.</p>
<p>Since this is a randomization problem, multiple answers are allowed so the following outputs can be considered correct :<br>
[null,1,1,1,1,0]<br>
[null,1,1,1,1,1]<br>
[null,1,1,1,0,0]<br>
[null,1,1,1,0,1]<br>
[null,1,0,1,0,0]<br>
…<br>
and so on.</p>
<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= w.length &lt;= 10000</code></li>
<li><code>1 &lt;= w[i] &lt;= 10^5</code></li>
<li><code>pickIndex</code> will be called at most  <code>10000</code>  times.</li>
</ul>
<p><strong>[Solution]</strong></p>
<pre class=" language-java"><code class="prism  language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> sum<span class="token punctuation">;</span>
    Random r<span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> <span class="token function">Solution</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> w<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        r <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sum <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>w<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>
        sum<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> w<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> w<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> sum<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> sum<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> w<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">pickIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">double</span> d <span class="token operator">=</span> sum<span class="token punctuation">[</span>sum<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> sum<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>d <span class="token operator">&lt;</span> sum<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">return</span> i<span class="token punctuation">;</span>
            i<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token keyword">return</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
</div>
</body>

</html>
