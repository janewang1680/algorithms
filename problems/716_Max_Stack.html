<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>716_Max_Stack</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__html"><p><strong>716.  Max Stack</strong></p>
<p>Easy</p>
<p>Design a max stack data structure that supports the stack operations and supports finding the stack’s maximum element.</p>
<p>Implement the  <code>MaxStack</code>  class:</p>
<ul>
<li><code>MaxStack()</code>  Initializes the stack object.</li>
<li><code>void push(int x)</code>  Pushes element  <code>x</code>  onto the stack.</li>
<li><code>int pop()</code>  Removes the element on top of the stack and returns it.</li>
<li><code>int top()</code>  Gets the element on the top of the stack without removing it.</li>
<li><code>int peekMax()</code>  Retrieves the maximum element in the stack without removing it.</li>
<li><code>int popMax()</code>  Retrieves the maximum element in the stack and removes it. If there is more than one maximum element, only remove the  <strong>top-most</strong>  one.</li>
</ul>
<p><strong>Example 1:</strong></p>
<p><strong>Input</strong><br>
[“MaxStack”, “push”, “push”, “push”, “top”, “popMax”, “top”, “peekMax”, “pop”, “top”]<br>
[[], [5], [1], [5], [], [], [], [], [], []]<br>
<strong>Output</strong><br>
[null, null, null, null, 5, 5, 1, 5, 1, 5]</p>
<p><strong>Explanation</strong><br>
MaxStack stk = new MaxStack();<br>
stk.push(5);   // [<strong>5</strong>] the top of the stack and the maximum number is 5.<br>
stk.push(1);   // [5, <strong>1</strong>] the top of the stack is 1, but the maximum is 5.<br>
stk.push(5);   // [5, 1, <strong>5</strong>] the top of the stack is 5, which is also the maximum, because it is the top most one.<br>
stk.top();     // return 5, [5, 1, <strong>5</strong>] the stack did not change.<br>
stk.popMax();  // return 5, [5, <strong>1</strong>] the stack is changed now, and the top is different from the max.<br>
stk.top();     // return 1, [5, <strong>1</strong>] the stack did not change.<br>
stk.peekMax(); // return 5, [5, <strong>1</strong>] the stack did not change.<br>
stk.pop();     // return 1, [<strong>5</strong>] the top of the stack and the max element is now 5.<br>
stk.top();     // return 5, [<strong>5</strong>] the stack did not change.</p>
<p><strong>Constraints:</strong></p>
<ul>
<li><code>-107 &lt;= x &lt;= 107</code></li>
<li>At most  <code>104</code>  calls will be made to  <code>push</code>,  <code>pop</code>,  <code>top</code>,  <code>peekMax</code>, and  <code>popMax</code>.</li>
<li>There will be  <strong>at least one element</strong>  in the stack when  <code>pop</code>,  <code>top</code>,  <code>peekMax</code>, or  <code>popMax</code>  is called.</li>
</ul>
<p><strong>Follow up:</strong>  Could you come up with a solution that supports  <code>O(1)</code>  for each  <code>top</code>  call and  <code>O(logn)</code>  for each other call?</p>
<p><strong>[Solution]</strong></p>
<pre class=" language-java"><code class="prism  language-java"><span class="token keyword">class</span> <span class="token class-name">MaxStack</span> <span class="token punctuation">{</span>
    Stack<span class="token operator">&lt;</span>Integer<span class="token operator">&gt;</span> stack1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Stack<span class="token operator">&lt;</span>Integer<span class="token operator">&gt;</span> stack2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">/** initialize your data structure here. */</span>
    <span class="token keyword">public</span> <span class="token function">MaxStack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         stack1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         stack2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>stack1<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            stack1<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
            stack2<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            stack1<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
            stack2<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>stack2<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> val <span class="token operator">=</span> stack1<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        stack2<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> val<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> stack1<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">peekMax</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> stack2<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">popMax</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> max <span class="token operator">=</span> <span class="token function">peekMax</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Stack<span class="token operator">&lt;</span>Integer<span class="token operator">&gt;</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> max<span class="token punctuation">)</span> buffer<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>buffer<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token function">push</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> max<span class="token punctuation">;</span> 
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
</div>
</body>

</html>
